## HTTPS

HTTP의 보안이 강화된 버전으로 SSL이나 TLS프로토콜을 통해 세션 데이터를 암호화하므로 데이터의 적절한 보호를 보장한다. 기본 TCP/IP 포트는 443이다. HTTPS는 다음을 만족한다.

1. 내가 사이트에 보내는 정보들을 제 3자가 못 보게 한다.
2. 접속한 사이트가 믿을 만한 곳인지를 알려준다. 

### 인증서 발급 과정 및 원리

연결을 허용하기에 클라이언트는 본인이 접속하는 서버가 신뢰할만한 서버인지 확인해야 하는데 이 신원을 보증하기 위해서는 제 3자의 입장인 인증기관을 필요로 한다. 

- HTTPS를 연결하기에 서버의 관리자는 공개키와 개인키를 생성한다.
- 인증서를 발급받기 위해, 서버는 신뢰할만한 인증 기간( CA에 )에 비용을 지불하고 앞에서 생성한 공개키와 서버의 각종 정보를 전달한다.
- 인증기관은 서버로부터 받은 정보들을 통해 SSL인증서를 발급한다.
- 만들어진 인증서를 암호화 하기 위해, CA의 공개키와 비밀키를 생성하고 CA의 비밀키를 이용해 인증서를 암호화한다.
- 암호화된 인증서를 다시 서버에 전달한다.

### SSL Handshake

- 클라이언트가 랜덤 데이터를 생성해서 서버에 보낸다.
- 서버는 답변으로 다른 랜덤 데이터와 CA로부터 검증된 인증서를 클라이언트에게 보낸다.
- 클라이언트는 CA의 비밀키로 암호화된 인증서를 공개키로 복호화 하기 위해 브라우저 내부에서 CA리스트를 탐색하여 CA의 공개키를 찾게된다. 만약 해당 공개키를 찾아 SSL인증서를 복호화한다면 인증서 검증에 성공한다.

### Session(데이터 전달이 이루어지는 과정)

인증서 검증을 완료하여 서버가 신뢰할 수 있다는것을 알게되면 서버와 원하는 데이터를 안전하게 주고받기 위해서 전달하는 데이터를 암호화한다. 

- 클라이언트는 데이터를 암호화하기 위한 대칭 키(비밀 키)를 생성하게 되는데  해당 키를 서버만 볼 수 있게 하기 위해 서버의 공개키로 암호화 해서 서버에게 전달한다.
- 서버는 클라이언트가 전달한 키를 전달받고 해당 키를 서버의 비밀키로 복화화해서 얻는다.
- 이제 서버와 클라이언트 모두 동일한 대칭키(비밀 키)를 갖고 있으니 통신 할 준비가 완료된다.
